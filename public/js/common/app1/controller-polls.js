/*! (C) 2017 https://github.com/ikarus512 */!function(){"use strict";function n(n,e,l,o,i,a){n.ajaxLoadingSpinner=0,o.webApp?(n.logintype=a.logintype&&"undefined"!==a.logintype?a.logintype:"",n.username=a.username&&"undefined"!==a.username?a.username:""):(n.ajaxLoadingSpinner++,i.check().then(function(){n.logintype=i.type,n.username=i.name}).finally(function(){n.ajaxLoadingSpinner--})),n.urlPrefix=o.urlPrefix,n.view="polls",n.newPollTitle="",n.editedPoll=null,n.newPollMode=function(){n.view="newPoll"},n.newPollCancel=function(){n.newPollTitle="",n.view="polls"},n.newPollCreate=function(){var o=n.newPollTitle.trim();o&&(n.ajaxLoadingSpinner++,e.post({title:o}).then(function(e){var l=e.data;n.polls.push(l),n.newPollTitle="",n.view="polls"}).catch(function(n){l.alert(n)}).finally(function(){n.ajaxLoadingSpinner--}))},n.polls=[],n.ajaxLoadingSpinner++,e.get().then(function(e){n.polls=e.data}).catch(function(n){l.alert(n)}).finally(function(){n.ajaxLoadingSpinner--})}angular.module("app1polls").controller("ControllerPolls",n),n.$inject=["$scope","StoragePolls","MyError","MyConst","User","backendParams"]}();