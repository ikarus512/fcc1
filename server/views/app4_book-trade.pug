//-
  /* file: app4_book-trade.pug */
  /*!
   * Copyright 2017 ikarus512
   * https://github.com/ikarus512/fcc1.git
   *
   * DESCRIPTION: App4 Book Trade
   * AUTHOR: ikarus512
   * CREATED: 2017/05/02
   *
   * MODIFICATION HISTORY
   *  2017/05/02, ikarus512. Initial version.
   *
   */

h3.alert.alert-danger(ng-show='curBook.tradeFinished') Trade Finished

//- //////////////////////////////////////////////////////////
//- //  add bid form
//- //////////////////////////////////////////////////////////

form#addBidForm(name='addBidForm' novalidate ng-show='uid!==curBook.ownerId && !curBook.hasBid')

  //- addBidForm.price
  .form-group.has-feedback(ng-class="{'has-error': !addBidForm.price.$valid, 'has-success': addBidForm.price.$valid}")
    label.control-label(for='inputPrice') *Bid price ($): &nbsp;
    input#inputPrice.form-control(type='number' placeholder='Price' name='price' ng-model='newBidPrice' min='0' required my-focus='1')

    span.glyphicon.glyphicon-ok.form-control-feedback(ng-show='addBidForm.price.$valid')
    span.glyphicon.glyphicon-remove.form-control-feedback(ng-show='!addBidForm.price.$valid')

    ng-messages(for='addBidForm.price.$error' role='alert')
      +myMessage('required', 'Bid price is required field.')
      +myMessage('min'     , 'Bid price must be non-negative.')
      +myMessage('number'  , 'Bid price must be number.')

  button#addBid.btn.btn-primary(ng-disabled='!addBidForm.$valid' ng-click='addBid()') Add Bid


//- //////////////////////////////////////////////////////////
//- //  bids
//- //////////////////////////////////////////////////////////

form.form-inline#updateBidForm(name='updateBidForm' novalidate): .bids(ng-repeat='bid in curBook.bids' ng-cloak)

  .bid.bid-bg-gray(ng-show='uid!==bid.by._id')
    .bid-price ${{bid.price}} &nbsp;
    .bid-user {{bid.by.name}} &nbsp;

  .bid(ng-show='uid===bid.by._id')
    .bid-price ${{bid.price}} &nbsp;
    .bid-user you &nbsp;

    - var priceError = 'updateBidForm[\'price\'+$index].$error';
    - var selector = '#updatePriceInput{{$index}}';
    +myMessagePopover('priceRequired{{$index}}', '#msg1', priceError+'.required', 'required field')
      +myMessagePopover('priceMin{{$index}}'     , '#msg2', priceError+'.min'     , 'must be non-negative')
        +myMessagePopover('priceNumber{{$index}}'  , '#msg3', priceError+'.number'  , 'must be number')
          input.input-sm.def-colors(id='updatePriceInput{{$index}}' type='number' placeholder='Bid Price' name='price{{$index}}' ng-model='bid.updateBidPrice' min='0' required my-focus='1' my-enter='updateBid(bid.price,bid.updateBidPrice)')

    | &nbsp;

    button.btn.btn-primary.btn-xs(id='updateBidButton{{$index}}' ng-disabled='!updateBidForm[\'price\'+$index].$valid || bid.price===bid.updateBidPrice' ng-click='updateBid(bid.price,bid.updateBidPrice)') Update Bid Price
    | &nbsp;

    .bid-user you &nbsp;
