extend ./common/layout.pug

block vars
  - var title = 'Voting';
  - var background = 'background-color: #444; background-image: url(/img/pixabay_com_world.jpg);';

block scriptBeforeBody
  script(src='/lib/angular.min.js')
  script(src='/js/app1_polls.js')

block content
  .well.my-opacity-08
    h3 Voting App

  div(ng-app="myApp1Voting" ng-controller="myApp1Controller" ng-init="init('"+logintype+"')" ng-cloak)

    //- //////////////////////////////////////////////////////////
    //- //  polls list
    //- //////////////////////////////////////////////////////////
    #polls.well.my-opacity-08(ng-show="view=='polls' && polls.length" ng-cloak)
      h3 Polls:
      div(ng-repeat="poll in polls" ng-cloak)
        a.btn.btn-primary.form-control(href='/app1/polls/{{poll._id}}') {{poll.title}}

    #noPolls.well.my-opacity-08(ng-show="view=='polls' && !polls.length" ng-cloak)
      label No polls.


    //- //////////////////////////////////////////////////////////
    //- //  creating new poll
    //- //////////////////////////////////////////////////////////
    #newPollButton.well.my-opacity-08(ng-show="view=='polls' && logintype")
      button.btn.btn-primary(ng-click='newPollMode()') Create New Poll

    #newPoll.well.my-opacity-08(ng-show="view=='newPoll'")
      h3 Creating New Poll...
      div
        label New Poll Title: &nbsp;
        input.form-control(placeholder="New Poll Title" ng-model="newPollTitle" my-escape="newPollCancel()" my-enter="newPollCreate()" my-focus="view=='newPoll'")
        br
        br
        button.btn.btn-primary(ng-click='newPollCancel()') Cancel
        | &nbsp;
        button.btn.btn-primary(ng-click='newPollCreate()') Create
        br
